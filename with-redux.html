<!DOCTYPE html>
<html lang="ko">
    <head>
        <title>redux</title>
        <meta charset="UTF-8" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.1/redux.js"></script>
    </head>
    <body>
        <style>
            .container{
                border: 5px solid black;
                padding: 10px;
            }
        </style>
        <h1>With redux</h1>
        <div id="red"></div>
        <div id="pink"></div>
        <div id="purple"></div>
        <div id="yellow"></div>
        <script>    
            function reducer(state , action){
                if(state === undefined){
                    return {color:'yellow'}
                }

                let newState;
                if(action.type ==='CHANGE_COLOR'){
                    newState = Object.assign({}, state, {color:action.color});
                }
                console.log(action.type,action , state, newState);
                return newState;
            }

            
            let store =Redux.createStore(reducer 
            ,
            window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());
            console.log(store.getState());

            function red(){
                let state = store.getState();
                document.querySelector('#red').innerHTML = `
                    <div class="container" id = "component_red" style= "background-color:${state.color}" >
                        <h1>red</h1>
                        <input type="button" value= "fire" onclick="
                        store.dispatch({type:'CHANGE_COLOR' , color :'red'});
                       
                        ">
                    </div>
                    `;
                }
            store.subscribe(red);
            red();

            function pink(){
                let state = store.getState();
                document.querySelector('#pink').innerHTML = `
                    <div class="container" id = "component_pink" style= "background-color:${state.color}" >
                        <h1>pink</h1>
                        <input type="button" value= "fire" onclick="
                        store.dispatch({type:'CHANGE_COLOR' , color :'pink'});
                       
                        ">
                    </div>
                    `;
                }
            store.subscribe(pink);
            pink();

            function purple(){
                let state = store.getState();
                document.querySelector('#purple').innerHTML = `
                    <div class="container" id = "component_purple" style= "background-color:${state.color}" >
                        <h1>purple</h1>
                        <input type="button" value= "fire" onclick="
                        store.dispatch({type:'CHANGE_COLOR' , color :'purple'});
                        ">
                    </div>
                    `;
                }
            store.subscribe(purple);
            purple();

            function yellow(){
                let state = store.getState();
                document.querySelector('#yellow').innerHTML = `
                    <div class="container" id = "component_yellow" style= "background-color:${state.color}" >
                        <h1>yellow</h1>
                        <input type="button" value= "fire" onclick="
                        store.dispatch({type:'CHANGE_COLOR' , color :'black'});
                        ">
                    </div>
                    `;
                }
            store.subscribe(yellow);
            yellow();
       
        </script>
    </body>
</html>


